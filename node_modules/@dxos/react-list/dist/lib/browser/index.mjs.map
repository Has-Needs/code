{
  "version": 3,
  "sources": ["../../../src/List.tsx", "../../../src/ListItem.tsx"],
  "sourcesContent": ["//\n// Copyright 2023 DXOS.org\n//\n\nimport { createContextScope, type Scope } from '@radix-ui/react-context';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport React, { type ComponentPropsWithRef, forwardRef } from 'react';\n\n// TODO(thure): A lot of the accessible affordances for this kind of thing need to be implemented per https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/listbox_role\n\nconst LIST_NAME = 'List';\n\ntype ListScopedProps<P> = P & { __listScope?: Scope };\n\ntype ListVariant = 'ordered' | 'unordered';\n\ntype ListItemSizes = 'one' | 'many';\n\ntype ListProps = ComponentPropsWithRef<typeof Primitive.ol> & {\n  selectable?: boolean;\n  variant?: ListVariant;\n  itemSizes?: ListItemSizes;\n};\n\nconst [createListContext, createListScope] = createContextScope(LIST_NAME, []);\n\ntype ListContextValue = {\n  selectable: Exclude<ListProps['selectable'], undefined>;\n  variant: Exclude<ListProps['variant'], undefined>;\n  itemSizes?: ListItemSizes;\n};\n\nconst [ListProvider, useListContext] = createListContext<ListContextValue>(LIST_NAME);\n\nconst List = forwardRef<HTMLOListElement, ListProps>((props: ListScopedProps<ListProps>, forwardedRef) => {\n  const { __listScope, variant = 'ordered', selectable = false, itemSizes, children, ...rootProps } = props;\n  const ListRoot = variant === 'ordered' ? Primitive.ol : Primitive.ul;\n  return (\n    <ListRoot {...(selectable && { role: 'listbox', 'aria-multiselectable': true })} {...rootProps} ref={forwardedRef}>\n      <ListProvider\n        {...{\n          scope: __listScope,\n          variant,\n          selectable,\n          itemSizes,\n        }}\n      >\n        {children}\n      </ListProvider>\n    </ListRoot>\n  );\n});\n\nList.displayName = LIST_NAME;\n\nexport { List, createListScope, useListContext, LIST_NAME };\n\nexport type { ListProps, ListVariant, ListScopedProps };\n", "//\n// Copyright 2023 DXOS.org\n//\n\nimport type { CheckboxProps } from '@radix-ui/react-checkbox';\nimport { type CollapsibleContentProps, type CollapsibleTriggerProps } from '@radix-ui/react-collapsible';\nimport * as Collapsible from '@radix-ui/react-collapsible';\nimport { createContextScope, type Scope } from '@radix-ui/react-context';\nimport { Primitive } from '@radix-ui/react-primitive';\nimport { Slot } from '@radix-ui/react-slot';\nimport { useControllableState } from '@radix-ui/react-use-controllable-state';\nimport React, {\n  type ComponentProps,\n  type ComponentPropsWithoutRef,\n  type Dispatch,\n  type ElementRef,\n  forwardRef,\n  type ForwardRefExoticComponent,\n  type RefAttributes,\n  type SetStateAction,\n} from 'react';\n\nimport { useId } from '@dxos/react-hooks';\n\nimport { LIST_NAME, type ListScopedProps, useListContext } from './List';\n\nconst LIST_ITEM_NAME = 'ListItem';\n\ntype ListItemScopedProps<P> = P & { __listItemScope?: Scope };\n\ninterface ListItemData {\n  id: string;\n  labelId?: string;\n  selected?: CheckboxProps['checked'];\n  open?: boolean;\n}\n\ntype ListItemProps = Omit<ListItemData, 'id'> & { collapsible?: boolean } & RefAttributes<HTMLLIElement> &\n  ComponentPropsWithoutRef<'li'> & {\n    defaultOpen?: boolean;\n    onOpenChange?: (nextOpen: boolean) => void;\n  } & {\n    onSelectedChange?: CheckboxProps['onCheckedChange'];\n    defaultSelected?: CheckboxProps['defaultChecked'];\n  };\n\ntype ListItemElement = ElementRef<'li'>;\n\nconst [createListItemContext, createListItemScope] = createContextScope(LIST_ITEM_NAME, []);\n\ntype ListItemContextValue = {\n  headingId: string;\n  open: boolean;\n  selected: CheckboxProps['checked'];\n  setSelected: Dispatch<SetStateAction<CheckboxProps['checked']>>;\n};\n\nconst [ListItemProvider, useListItemContext] = createListItemContext<ListItemContextValue>(LIST_ITEM_NAME);\n\ntype ListItemHeadingProps = ListItemScopedProps<Omit<ComponentPropsWithoutRef<'p'>, 'id'>> &\n  RefAttributes<HTMLParagraphElement> & {\n    asChild?: boolean;\n  };\n\nconst ListItemHeading = forwardRef<HTMLDivElement, ListItemHeadingProps>(\n  ({ children, asChild, __listItemScope, ...props }, forwardedRef) => {\n    const { headingId } = useListItemContext(LIST_ITEM_NAME, __listItemScope);\n    const Root = asChild ? Slot : Primitive.div;\n    return (\n      <Root {...props} id={headingId} ref={forwardedRef}>\n        {children}\n      </Root>\n    );\n  },\n);\n\ntype ListItemOpenTriggerProps = ListItemScopedProps<CollapsibleTriggerProps>;\n\nconst ListItemOpenTrigger = Collapsible.Trigger;\n\ntype ListItemCollapsibleContentProps = ComponentProps<typeof Collapsible.Content>;\n\nconst ListItemCollapsibleContent: ForwardRefExoticComponent<CollapsibleContentProps> = Collapsible.Content;\n\nconst ListItem = forwardRef<ListItemElement, ListItemProps>(\n  (props: ListItemScopedProps<ListScopedProps<ListItemProps>>, forwardedRef) => {\n    const id = useId('listItem', props.id);\n\n    const {\n      __listScope,\n      __listItemScope,\n      children,\n      selected: propsSelected,\n      defaultSelected,\n      onSelectedChange,\n      open: propsOpen,\n      defaultOpen,\n      onOpenChange,\n      collapsible,\n      labelId,\n      ...listItemProps\n    } = props;\n    const { selectable } = useListContext(LIST_NAME, __listScope);\n\n    const [selected = false, setSelected] = useControllableState({\n      prop: propsSelected,\n      defaultProp: defaultSelected,\n      onChange: onSelectedChange,\n    });\n\n    const [open = false, setOpen] = useControllableState({\n      prop: propsOpen,\n      defaultProp: defaultOpen,\n      onChange: onOpenChange,\n    });\n\n    const headingId = useId('listItem__heading', labelId);\n\n    const listItem = (\n      <Primitive.li\n        {...listItemProps}\n        id={id}\n        ref={forwardedRef}\n        aria-labelledby={headingId}\n        {...(selectable && { role: 'option', 'aria-selected': !!selected })}\n        {...(open && { 'aria-expanded': true })}\n      >\n        {children}\n      </Primitive.li>\n    );\n\n    return (\n      <ListItemProvider\n        scope={__listItemScope}\n        headingId={headingId}\n        open={open}\n        selected={selected}\n        setSelected={setSelected}\n      >\n        {collapsible ? (\n          <Collapsible.Root asChild open={open} onOpenChange={setOpen}>\n            {listItem}\n          </Collapsible.Root>\n        ) : (\n          listItem\n        )}\n      </ListItemProvider>\n    );\n  },\n);\n\nListItem.displayName = LIST_ITEM_NAME;\n\nexport {\n  ListItem,\n  ListItemHeading,\n  ListItemCollapsibleContent,\n  ListItemOpenTrigger,\n  createListItemScope,\n  useListItemContext,\n  LIST_ITEM_NAME,\n};\n\nexport type {\n  ListItemProps,\n  ListItemHeadingProps,\n  ListItemCollapsibleContentProps,\n  ListItemOpenTriggerProps,\n  ListItemScopedProps,\n};\n"],
  "mappings": "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",
  "names": ["createContextScope", "Primitive", "React", "forwardRef", "LIST_NAME", "createListContext", "createListScope", "createContextScope", "ListProvider", "useListContext", "List", "forwardRef", "props", "forwardedRef", "__listScope", "variant", "selectable", "itemSizes", "children", "rootProps", "ListRoot", "Primitive", "ol", "ul", "role", "ref", "scope", "displayName", "Collapsible", "createContextScope", "Primitive", "Slot", "useControllableState", "React", "forwardRef", "useId", "LIST_ITEM_NAME", "createListItemContext", "createListItemScope", "createContextScope", "ListItemProvider", "useListItemContext", "ListItemHeading", "forwardRef", "children", "asChild", "__listItemScope", "props", "forwardedRef", "headingId", "Root", "Slot", "Primitive", "div", "React", "id", "ref", "ListItemOpenTrigger", "Trigger", "ListItemCollapsibleContent", "Content", "ListItem", "useId", "__listScope", "selected", "propsSelected", "defaultSelected", "onSelectedChange", "open", "propsOpen", "defaultOpen", "onOpenChange", "collapsible", "labelId", "listItemProps", "selectable", "useListContext", "LIST_NAME", "setSelected", "useControllableState", "prop", "defaultProp", "onChange", "setOpen", "listItem", "li", "aria-labelledby", "role", "scope", "displayName"]
}
