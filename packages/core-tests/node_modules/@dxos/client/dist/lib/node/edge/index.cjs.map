{
  "version": 3,
  "sources": ["../../../../src/edge/edge-identity.ts"],
  "sourcesContent": ["//\n// Copyright 2025 DXOS.org\n//\n\nimport { type EdgeIdentity } from '@dxos/edge-client';\n\nimport { type Client } from '../client';\n\nexport const createEdgeIdentity = (client: Client): EdgeIdentity => {\n  const identity = client.halo.identity.get();\n  const device = client.halo.device;\n  if (!identity || !device) {\n    throw new Error('Identity not available');\n  }\n  return {\n    identityKey: identity.identityKey.toHex(),\n    peerKey: device.deviceKey.toHex(),\n    presentCredentials: async ({ challenge }) => {\n      const identityService = client.services.services.IdentityService!;\n      const authCredential = await identityService.createAuthCredential();\n      return identityService.signPresentation({\n        presentation: { credentials: [authCredential] },\n        nonce: challenge,\n      });\n    },\n  };\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAQO,IAAMA,qBAAqB,CAACC,WAAAA;AACjC,QAAMC,WAAWD,OAAOE,KAAKD,SAASE,IAAG;AACzC,QAAMC,SAASJ,OAAOE,KAAKE;AAC3B,MAAI,CAACH,YAAY,CAACG,QAAQ;AACxB,UAAM,IAAIC,MAAM,wBAAA;EAClB;AACA,SAAO;IACLC,aAAaL,SAASK,YAAYC,MAAK;IACvCC,SAASJ,OAAOK,UAAUF,MAAK;IAC/BG,oBAAoB,OAAO,EAAEC,UAAS,MAAE;AACtC,YAAMC,kBAAkBZ,OAAOa,SAASA,SAASC;AACjD,YAAMC,iBAAiB,MAAMH,gBAAgBI,qBAAoB;AACjE,aAAOJ,gBAAgBK,iBAAiB;QACtCC,cAAc;UAAEC,aAAa;YAACJ;;QAAgB;QAC9CK,OAAOT;MACT,CAAA;IACF;EACF;AACF;",
  "names": ["createEdgeIdentity", "client", "identity", "halo", "get", "device", "Error", "identityKey", "toHex", "peerKey", "deviceKey", "presentCredentials", "challenge", "identityService", "services", "IdentityService", "authCredential", "createAuthCredential", "signPresentation", "presentation", "credentials", "nonce"]
}
